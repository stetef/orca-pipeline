# Set target to feffXANES (we will later change this to XANES).
target_list { cfavg }
cfavg_target{ xas }
feff.debye{10.0   315.0  5 corvus-[ID].dym  16  0  3}
#write_input_only{ True }
#usesaved{ True }

# Set the absorbing atom type. This will loop over all Zn atoms.
absorbing_atom_type{ Zn }

# Get structure from xyz file.
xyz_input{[DIRECTORY][ID].xyz}

# Set the way that feff treats different atoms. In this case,
# make one unique potential for each chemical environment rather than
# 1 for each unique atom in the system.
feff.equivalence{ 4 }

# Set edge.
feff.edge{K}

# Use more accurate relative edge position (doesn't matter for exafs)
feff.chsh{4}

# Use SCF
feff.scf{ 9.0 0 100 0.05 0}

# Ramp SCF radius from 3 to final radius (9) to improve convergence and possibly speed up.
feff.scframp{ 3.0 1 }

# Run all parts of feff
feff.control{1 1 1 1 1 1}

# Use a fine radial grid.
feff.rgrid{ 0.01 }

# Set the energy grid. This is serious overkill, but we can optimize easily later.
feff.egrid{ 
e_grid -200 -10 20.0
e_grid -10 10 0.1
k_grid last 20 0.025
}

# Set the muffin-tin overlap of H to 0.8, 1.15 to all others.
mt_overlap{
H 0.8
Zn 1.15
O 1.15
N 1.15
C 1.15
S 1.15
}

# This is used only in the XANES part of the calculation. Useful for creating a combined XAS curve. 
# Will run much faster if this is removed.
feff.lfms2{5}

# Setting for XANES part of the calculation. Reduce 9.0 to 3.0 to make this very fast and still get good EXAFS.
feff.fms{9.0 0 0 0.0 0.0 40.0}

# Max path length in EXAFS calculations. Probably could be set to 7 or 8 without any serious change to chi(r), but
# may need this long path length for low k when interpolating to the XANES calculation.
feff.rpath{9.0}

# Make sure we have the right self-energy model.
feff.exchange{ 0 0.0 0.0 0 }

# Use MPI, automatically detect the number of processors
feff.MPI.CMD{ mpirun }
feff.MPI.ARGS{ -n [PROCS] }

# Don't use multiprocessing with mpi. Can be used if we have many calculations that we
# want to run on a single thread. This can safely be removed, as this is the default.
multiprocessing_ncpu{ 1 }
